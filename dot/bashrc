# bash options {{{

set -o vi
shopt -s autocd

# dot not print meta chars, e.g. `Ë†C` when <C-c> is pressed to escape a command
stty -echoctl

# }}}
# exports {{{

export LANG=en_GB.UTF-8
export TERM=tmux-256color
export EDITOR=nvim

# }}}
# path {{{

PATH="/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"

#export GNUBIN_PATH=/usr/local/opt/coreutils/libexec/gnubin
#PATH="$GNUBIN_PATH:$PATH"

#export GNUBIN_PATH=/usr/local/opt/coreutils/libexec/gnubin
#export TEXBIN=/Library/TeX/texbin
#export PACKER_BIN=~/bin/packer_0.8.6_darwin_amd64
#export PHALCON_PATH=/Volumes/Development/devtools/phalcon-devtools
#export GCLOUD_PATH=/Volumes/Development/devtools/google-cloud-sdk
#PATH="/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"
#PATH="$PHALCON_PATH:$PATH"
#PATH="$GCLOUD_PATH:$PATH"
#PATH="$GNUBIN_PATH:$PATH"
#PATH="$TEXBIN:$PATH"
#PATH="$PACKER_BIN:$PATH"

#MANPATH="/usr/local/opt/coreutils/libexec/gnuman:$MANPATH"

export PATH

# }}}

# plugins {{{

# colors for GNU ls (from coreutils)
eval `dircolors ~/.lscolors`

# }}}

# terminal colors {{{

TC='\e['
Rst="${TC}0m"
Black="${TC}30m";
Red="${TC}31m";
Green="${TC}32m";
Yellow="${TC}33m";
Blue="${TC}34m";
Purple="${TC}35m";
Cyan="${TC}36m";
White="${TC}37m";

# }}}

# alias | binds {{{

alias ag='ag --hidden --path-to-agignore=~/.agignore'
alias b='cd ..'
alias c='clear'
alias di='dirs -v | head -n 10'
alias dic='dirs -c'
alias dot='la `find ~ -maxdepth 1 -type l`'
alias e='emacs'
alias q='exit'
alias k='k -h'
alias l='ls -lh'
alias la='l -Ah'
alias ls='ls --color=auto --group-directories-first -X'
alias m='nman'
alias po='popd'
alias t='tmux'
alias tarc='tar -zcvf file.tar.gz'
alias tarx='tar -zxvf'
alias v='nvim'
alias vi='nvim -u NONE'
alias vv='v ~/.vimrc'
alias vz='v ~/.bashrc'
alias w='echo -e "$Blue $PWD ${Red}at ${Cyan}$(whoami)${Red}@${Yellow}$(hostname -s)$Red in $Yellow${0}$Purple \$"'

# git alias
alias g='git status -sb'
alias gg='git branch -vv'
alias gs='git status'
alias ga='git add'
alias gal='git add -A'
alias gc='git commit -v'
alias gd='git diff'
alias gds='git diff --stat'
alias gf='git fetch'
alias gm='git merge'
alias gp='git push'
alias gl='git log --pretty=format:"%C(yellow)%h%Creset %C(blue)%d%Creset %C(cyan)%ad%Creset %C(magenta)%an%Creset %s" --date=relative --graph'
alias glr='gl --reflog'
alias gld='git log --pretty=format:"%C(yellow)%h%Creset %C(blue)%d%Creset %C(cyan)%ad%Creset %C(magenta)%an%Creset %s" --graph'
alias glf='git log --follow -p -- '
alias glnc='git log --pretty=format:"%h %ad %an %s" --date=short --graph'
alias glsi='git ls-files -oiX .gitignore'
alias gi='builtin cd $(git rev-parse --show-toplevel)'

# Control Vagrant in working directory
alias vu='vagrant up'
alias vs='vagrant ssh'
alias vh='vagrant halt'

# }}}

# custom functions {{{

md () {
  mkdir -p $1
  cd $1
}

# neoman vim plugin
function nman () {
    if [[ -z $* ]]; then
        echo "What manual page do you want?"
        return
    fi
    local tmp=$IFS
    IFS=$'\n' out=($(command man -w $* 2>&1))
    local code=$?
    IFS=$tmp
    if [[ ${#out[@]} > 1 ]]; then
        echo "Too many manpages"
        return
    elif [[ $code != 0 ]]; then
        echo "No manual entry for $*"
        return
    fi
    vim -c "Nman $*"
}

# }}}

# prompt {{{

export PS1="${Blue}\w ${Red}\u${Cyan}@${Yellow}\h ${Purple}#${Rst} "

# }}}
